# 跟我一起写EventBus（三）

在 [`跟我一起写EventBus（一）`](how-to-write-an-eventbus-part1.md) 里实现了一个非常粗糙的`EventBus`，在 [`跟我一起写EventBus（二）`](how-to-write-an-eventbus-part2.md) ，又增加了基类中注册和事件类型宽泛匹配的功能，这一节离我们要加上如下几个功能：

* 在不同的线程分发事件的功能（即在指定的线程调用使用了 `@BusReceiver` 注解的事件接收器的方法），主要支持三个线程：
	1. 事件发送者（调用 `post(event)`方法）所在的线程，这是上一版的处理方式，对于大部分场景来说，这都不太合适；
	2. 主线程（UI线程），对Android来说，异步任务完成后一般是更新界面，而更新UI必须在主线程中操作，所以这是一个主要用例；
	3. 独立线程，另外维护一个线程池，在单独的线程中处理事件，这个适用于需要在事件接收器方法中进行耗时操作的情况，可以避免堵塞发送者线程或主线程。

* 根据事件类型查找基类或接口类型的功能，这是为了支持事件类型的模糊匹配（支持父类和接口）和事件类型的缓存


